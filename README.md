# Meme Generator

## QuoteEngine Module
The `QuoteEngine` module contains a `QuoteModel` class and an `Ingestor` class and
is used to import quotes from external files, like a `.txt` or `.pdf` file.
- `QuoteEngine.QuoteModel`: A class which represent a quote. 
  It has a body (some funny text) and an author of the body.
```python
>>> from QuoteEngine import QuoteModel
>>> 
>>> body = 'Hello, world!'
>>> author = 'Myself'
>>> quote = QuoteModel(body, author)
>>> print(quote)
'"Hello, world!" - Myself'
>>> quote
QuoteModel(body='Hello, world!', author='Myself')
```
- `QuoteEngine.Ingestor`: A class with the method `Ingestor.parse()`, which is used 
  to consume a file and return a list of `QuoteModel` objects.
  The file extensions allowed are: txt, csv, docx, pdf.
  The method get only one argument, a string representing the file path.
  In order to a correct interpretation of the file data, 
  it must contain only one quote in every line, and the body
  must be separated from de author by a hyphen ` - ` (between two spaces). 
  The body is the first data, like in the next example:
```txt
"Body 1" - Author 1
"Body 2" - Author 2
...
```

### Dependencies:
Importing data from `.csv` files require `pandas` package to be installed.
It's also required `python-docx` package to import data from `.docx`.
In order to import data from pdf files, 
it's necessary to install the **pdftotext** tool for the shell.

*Installation:*
```shell
$ sudo apt install -y xpdf
```

*Checking the installation:*
```shell
$ pdftotext file/input.pdf file/output.txt
$ cat file/output.txt
```

## MemeGenerator Module
The `MemeGenerator` module contains the `MemeEngine` class which represent a 
directory where to generate memes and gives the ability to make new memes.
New memes are generated by the `.make_meme()` method
that generate a `.png` image with a funny text from a specified image file.

### Dependencies:
For image transformations, the `Pillow` package is required to be installed.

The strings drawed on the images uses the font of the file `LilitaOne-Regular.ttf`
in the `./fonts/` directory. If the directory or the font file is missed, 
can raise an error while executing the code.

## Command-Line Interface Tool
The `meme.py` file gives a CLI Tool for generating new memes.

```shell
$ python3 meme.py --path "directory/to/image.png" --body "Some funny text" --author "Someone"
```

If any parameter is missed, a random one is taken.
This CLI Tool use the `.make_meme()` method from `MemeEngine` to create a new meme.
Random choices of quotes are taken from `./_data/DogQuotes/` files, and
random choices of images are taken from `./_data/photos/dog/` files.
The generated image is saved in `./tmp/` directory, so that directory must exist before
executing the CLI Tool.

## Web App
The `app.py` file gives a web app for random generating memes. 
It's use the `.make_meme()` method from `MemeEngine` to create a new meme,
mixing random images from `./_data/photos/dog/` files 
with random quotes from `./_data/DogQuotes/` files (imported with the QuoteEngine module).
Every generated image is saved with a random name in `./static/` directory, 
so that directory must exist before executing the app.

### Dependencies:
In order to run a local server and manage templates, the `Flask` package is required 
to be installed. It's also required the `requests` package.
